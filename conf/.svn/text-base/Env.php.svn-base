<?php
/**
 * 一些因环境不同而变的量称为Config，使用Ops_Config来管理
 * 
 * 这个配置是全局的配置
 * 
 * 我们没有采用ini的配置格式，因为我们的环境要部署在bae上，不方便做
 * 目录权限控制。
 * 
 * 一些固定不变的称为Setting，setting直接用类常量表示就可以了。
 * 
 * @author walu<zhangmingqiang@baidu.com>
 */
class Ops_Config {
	
	/**
	 * 现在的配置
	 * 
	 * @var array
	 */
	private static $conf = array();
	
	/**
	 * 指定一个默认的配置文件路径
	 * 
	 * @param file
	 * @return bool 加载成功返回true。文件不存在或者返回值不为array返回false，并触发一个warning日志
	 */
	public static function setConfFile($conf_file_path) {
		if (!file_exists($conf_file_path)) {
			return false;
		}
		
		$conf = include_once($conf_file_path);
		if (!is_array($conf)) {
			return false;
		}
		
		self::$conf = $conf;
		return true;
	}
	
	/**
	 * @param string $key
	 * @param string $default
	 */
	public static function get($key, $default=null) {
		return isset(self::$conf[$key]) ? self::$conf[$key] : $default;
	}
}
